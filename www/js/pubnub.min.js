/* Modified: December 3, 2014, 03:52:27 */
function unique(){return"x"+ ++NOW+ +new Date}function rnow(){return+new Date}function build_url(a,b){var c=a.join(URLBIT),d=[];return b?(each(b,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;"undefined"!=typeof b&&null!=b&&encode(c).length>0&&d.push(a+"="+encode(c))}),c+="?"+d.join(PARAMSBIT)):c}function updater(a,b){var c,d=0,e=function(){d+b>rnow()?(clearTimeout(c),c=setTimeout(e,b)):(d=rnow(),a())};return e}function grep(a,b){var c=[];return each(a||[],function(a){b(a)&&c.push(a)}),c}function supplant(a,b){return a.replace(REPL,function(a,c){return b[c]||a})}function timeout(a,b){return setTimeout(a,b)}function uuid(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return a&&a(b),b}function isArray(a){return!!a&&"string"!=typeof a&&(Array.isArray&&Array.isArray(a)||"number"==typeof a.length)}function each(a,b){if(a&&b)if(isArray(a))for(var c=0,d=a.length;d>c;)b.call(a[c],a[c],c++);else for(var c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function map(a,b){var c=[];return each(a||[],function(a,d){c.push(b(a,d))}),c}function encode(a){return encodeURIComponent(a)}function generate_channel_list(a,b){var c=[];return each(a,function(a,d){b?a.search("-pnpres")<0&&d.subscribed&&c.push(a):d.subscribed&&c.push(a)}),c.sort()}function generate_channel_groups_list(a,b){var c=[];return each(a,function(a,d){b?channel.search("-pnpres")<0&&d.subscribed&&c.push(a):d.subscribed&&c.push(a)}),c.sort()}function ready(){timeout(function(){READY||(READY=1,each(READY_BUFFER,function(a){a()}))},SECOND)}function PNmessage(a){return msg=a||{apns:{}},msg.getPubnubMessage=function(){var a={};if(Object.keys(msg.apns).length){a.pn_apns={aps:{alert:msg.apns.alert,badge:msg.apns.badge}};for(var b in msg.apns)a.pn_apns[b]=msg.apns[b];var c=["badge","alert"];for(var b in c)delete a.pn_apns[c[b]]}msg.gcm&&(a.pn_gcm={data:msg.gcm});for(var b in msg)a[b]=msg[b];var d=["apns","gcm","publish","channel","callback","error"];for(var b in d)delete a[d[b]];return a},msg.publish=function(){var a=msg.getPubnubMessage();msg.pubnub&&msg.channel&&msg.pubnub.publish({message:a,channel:msg.channel,callback:msg.callback,error:msg.error})},msg}function PN_API(a){function b(a){return a||(a={}),each(db,function(b,c){b in a||(a[b]=c)}),a}function c(a){var b=[];return each(a,function(a){b.push(a)}),b}function d(a){return c(a).sort()}function e(a){var b="",c=d(a);for(var e in c){var f=c[e];b+=f+"="+encode(a[f]),e!=c.length-1&&(b+="&")}return b}function f(a,b,c){var d=!1;if("number"==typeof a)d=a>PRESENCE_HB_THRESHOLD||0==a?!1:!0;else{if("boolean"==typeof a)return a?PRESENCE_HB_DEFAULT:0;d=!0}return d?(c&&c("Presence Heartbeat value invalid. Valid range ( x > "+PRESENCE_HB_THRESHOLD+" or x = 0). Current Value : "+(b||PRESENCE_HB_THRESHOLD)),b||PRESENCE_HB_THRESHOLD):a}function g(a,b){return kb.encrypt(a,b||ib)||a}function h(a,b){return kb.decrypt(a,b||ib)||kb.decrypt(a,ib)||a}function i(){return clearTimeout(Y),!$||$>=500||1>$||!generate_channel_list(V,!0).length?void(_=!1):(_=!0,void lb.presence_heartbeat({callback:function(){Y=timeout(i,$*SECOND)},error:function(a){eb&&eb("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(a)),Y=timeout(i,$*SECOND)}}))}function j(){!_&&i()}function l(a){if(ab){if(!M.length)return}else{if(a&&(M.sending=0),M.sending||!M.length)return;M.sending=1}cb(M.shift())}function m(a){var b=0;return each(generate_channel_list(V),function(c){var d=V[c];d&&(b++,(a||function(){})(d))}),b}function o(a,b,c){if("object"==typeof a){if(a.error&&a.message&&a.payload)return void c({message:a.message,payload:a.payload});if(a.payload)return void b(a.payload)}b(a)}function p(a,b){b("object"==typeof a&&a.error&&a.message&&a.payload?{message:a.message,payload:a.payload}:a)}function q(a,c,d,e){var c=a.callback||c,f=a.error||eb,g=gb();e.auth||(e.auth=a.auth_key||E);var h=[J,"v1","channel-registration","sub-key",D];h.push.apply(h,d),cb({callback:g,data:b(e),success:function(a){o(a,c,f)},fail:function(a){p(a,f)},url:h})}function r(){fb()||t(1,{error:"Offline. Please check your network settings. "}),w&&clearTimeout(w),w=timeout(r,SECOND)}function s(){lb.time(function(a){v(function(){},a),a||t(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),x&&clearTimeout(x),x=timeout(s,A)})}function t(a,b){R&&R(a,b),R=null,clearTimeout(w),clearTimeout(x)}function u(a){var b=rnow()-O;return b-a/1e4}function v(a,b){function c(b){if(b){var c=b/1e4,e=(rnow()-d)/2;O=rnow()-(c+e),a&&a(O)}}var d=rnow();b&&c(b)||lb.time(c)}var w,x,y=+a.windowing||DEF_WINDOWING,z=(+a.timeout||DEF_SUB_TIMEOUT)*SECOND,A=(+a.keepalive||DEF_KEEPALIVE)*SECOND,B=a.noleave||0,C=a.publish_key||"demo",D=a.subscribe_key||"demo",E=a.auth_key||"",F=a.secret_key||"",G=a.hmac_SHA256,H=a.ssl?"s":"",I="http"+H+"://"+(a.origin||"pubsub.pubnub.com"),J=nextorigin(I),K=nextorigin(I),L=function(){},M=[],N=!0,O=0,P=0,Q=0,R=0,S=a.restore||0,T=0,U=!1,V={},W={},X={},Y=null,Z=f(a.heartbeat||a.pnexpires||0,a.error),$=a.heartbeat_interval||Z-3,_=!1,ab=a.no_wait_for_pending,bb=a["compatible_3.5"]||!1,cb=a.xdr,db=a.params||{},eb=a.error||function(){},fb=a._is_online||function(){return 1},gb=a.jsonp_cb||function(){return 0},hb=a.db||{get:function(){},set:function(){}},ib=a.cipher_key,jb=a.uuid||hb&&hb.get(D+"uuid")||"",kb=a.crypto_obj||{encrypt:function(a){return a},decrypt:function(a){return a}},lb={LEAVE:function(a,c,d,e){var f={uuid:jb,auth:E},g=nextorigin(I),d=d||function(){},h=e||function(){},i=gb();if(a.indexOf(PRESENCE_SUFFIX)>0)return!0;if(bb){if(!H)return!1;if("0"==i)return!1}return B?!1:("0"!=i&&(f.callback=i),cb({blocking:c||H,timeout:2e3,callback:i,data:b(f),success:function(a){o(a,d,h)},fail:function(a){p(a,h)},url:[g,"v2","presence","sub_key",D,"channel",encode(a),"leave"]}),!0)},set_resumed:function(a){U=a},get_cipher_key:function(){return ib},set_cipher_key:function(a){ib=a},raw_encrypt:function(a,b){return g(a,b)},raw_decrypt:function(a,b){return h(a,b)},get_heartbeat:function(){return Z},set_heartbeat:function(a){Z=f(a,$,eb),$=Z-3>=1?Z-3:1,L(),i()},get_heartbeat_interval:function(){return $},set_heartbeat_interval:function(a){$=a,i()},get_version:function(){return SDK_VER},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b={aps:{badge:1,alert:""}};for(k in a)k[b]=a[k];return b},newPnMessage:function(){var a={};gcm&&(a.pn_gcm=gcm),apns&&(a.pn_apns=apns);for(k in n)a[k]=n[k];return a},_add_param:function(a,b){db[a]=b},channel_group_list_namespaces:function(a,b){var c=["namespace"];q(a,b,c)},channel_group_remove_namespace:function(a,b){var c=a.namespace;if(!c)return eb("Missing Namespace");var d=["namespace",encode(c),"remove"];q(a,b,d)},channel_group:function(a,b){var c,d,e=a.channel_group,f=a.channels||a.channel,g=a.cloak,h=[],i={},j=a.mode||"add";if(e){var k=e.split(":");k.length>1?(c="*"===k[0]?null:k[0],d=k[1]):d=k[0]}c&&h.push("namespace")&&h.push(encode(c)),h.push("channel-group"),d&&"*"!==d&&h.push(d),f?(isArray(f)&&(f=f.join(",")),i[j]=f,i.cloak=N?"true":"false"):"remove"===j&&h.push("remove"),"undefined"!=typeof g&&(i.cloak=g?"true":"false"),q(a,b,h,i)},channel_group_list_groups:function(a,b){var c;c=a.namespace||a.ns||a.channel_group||null,c&&(a.channel_group=c+":*"),lb.channel_group(a,b)},channel_group_list_channels:function(a,b){return a.channel_group?void lb.channel_group(a,b):eb("Missing Channel Group")},channel_group_remove_channel:function(a,b){return a.channel_group?a.channel||a.channels?(a.mode="remove",void lb.channel_group(a,b)):eb("Missing Channel"):eb("Missing Channel Group")},channel_group_remove_group:function(a,b){return a.channel_group?a.channel?eb("Use channel_group_remove_channel if you want to remove a channel from a group."):(a.mode="remove",void lb.channel_group(a,b)):eb("Missing Channel Group")},channel_group_add_channel:function(a,b){return a.channel_group?a.channel||a.channels?void lb.channel_group(a,b):eb("Missing Channel"):eb("Missing Channel Group")},channel_group_cloak:function(a,b){return"undefined"==typeof a.cloak?void b(N):(N=a.cloak,void lb.channel_group(a,b))},channel_group_list_groups:function(a,b){lb.channel_group(a,b)},channel_group_list_channels:function(a,b){lb.channel_group(a,b)},channel_group_list_namespaces:function(a,b){lb.channel_group(a,b)},channel_group_remove_namespace:function(a,b){lb.channel_group(a,b)},channel_group_add_channel:function(a,b){lb.channel_group(a,b)},channel_group_remove_channel:function(a,b){lb.channel_group_remove(a,b)},channel_group_remove_group:function(a,b){lb.channel_group_remove(a,b)},history:function(a,c){var c=a.callback||c,d=a.count||a.limit||100,e=a.reverse||"false",f=a.error||function(){},g=a.auth_key||E,i=a.cipher_key,j=a.channel,k=a.channel_group,l=a.start,m=a.end,n=a.include_token,o={},q=gb();return j||k?c?D?(o.stringtoken="true",o.count=d,o.reverse=e,o.auth=g,k&&(o["channel-group"]=k,j||(j=",")),q&&(o.callback=q),l&&(o.start=l),m&&(o.end=m),n&&(o.include_token="true"),void cb({callback:q,data:b(o),success:function(a){if("object"==typeof a&&a.error)return void f({message:a.message,payload:a.payload});for(var b=a[0],d=[],e=0;e<b.length;e++){var g=h(b[e],i);try{d.push(JSON.parse(g))}catch(j){d.push(g)}}c([d,a[1],a[2]])},fail:function(a){p(a,f)},url:[J,"v2","history","sub-key",D,"channel",encode(j)]})):eb("Missing Subscribe Key"):eb("Missing Callback"):eb("Missing Channel")},replay:function(a,c){var d,c=c||a.callback||function(){},e=a.auth_key||E,f=a.source,g=a.destination,h=a.stop,i=a.start,j=a.end,k=a.reverse,l=a.limit,m=gb(),n={};return f?g?C?D?("0"!=m&&(n.callback=m),h&&(n.stop="all"),k&&(n.reverse="true"),i&&(n.start=i),j&&(n.end=j),l&&(n.count=l),n.auth=e,d=[J,"v1","replay",C,D,f,g],void cb({callback:m,success:function(a){o(a,c,err)},fail:function(){c([0,"Disconnected"])},url:d,data:b(n)})):eb("Missing Subscribe Key"):eb("Missing Publish Key"):eb("Missing Destination Channel"):eb("Missing Source Channel")},auth:function(a){E=a,L()},time:function(a){var c=gb();cb({callback:c,data:b({uuid:jb,auth:E}),timeout:5*SECOND,url:[J,"time",c],success:function(b){a(b[0])},fail:function(){a(0)}})},publish:function(a,c){var d=a.message;if(!d)return eb("Missing Message");var e,c=c||a.callback||d.callback||function(){},f=a.channel||d.channel,h=a.auth_key||E,i=a.cipher_key,j=a.error||d.error||function(){},k=a.post||!1,m="store_in_history"in a?a.store_in_history:!0,n=gb(),q="push";return a.prepend&&(q="unshift"),f?C?D?(d.getPubnubMessage&&(d=d.getPubnubMessage()),d=JSON.stringify(g(d,i)),e=[J,"publish",C,D,0,encode(f),n,encode(d)],db={uuid:jb,auth:h},m||(db.store="0"),M[q]({callback:n,timeout:5*SECOND,url:e,data:b(db),fail:function(a){p(a,j),l(1)},success:function(a){o(a,c,j),l(1)},mode:k?"POST":"GET"}),void l()):eb("Missing Subscribe Key"):eb("Missing Publish Key"):eb("Missing Channel")},unsubscribe:function(a,b){var c=a.channel,d=a.channel_group,b=b||a.callback||function(){},e=a.error||function(){};T=0,c&&(c=map((c.join?c.join(","):""+c).split(","),function(a){return V[a]?a+","+a+PRESENCE_SUFFIX:void 0}).join(","),each(c.split(","),function(a){var c=!0;a&&(READY&&(c=lb.LEAVE(a,0,b,e)),c||b({action:"leave"}),V[a]=0,a in X&&delete X[a])})),d&&(d=map((d.join?d.join(","):""+d).split(","),function(a){return W[a]?a+","+a+PRESENCE_SUFFIX:void 0}).join(","),each(d.split(","),function(){var a=!0;d&&(READY&&(a=lb.LEAVE(d,0,b,e)),a||b({action:"leave"}),W[d]=0,d in X&&delete X[d])})),L()},subscribe:function(a,c){function d(a){a?timeout(L,SECOND):(J=nextorigin(I,1),K=nextorigin(I,1),timeout(function(){lb.time(d)},SECOND)),m(function(b){return a&&b.disconnected?(b.disconnected=0,b.reconnect(b.name)):void(a||b.disconnected||(b.disconnected=1,b.disconnect(b.name)))})}function e(){var a=gb(),c=generate_channel_list(V).join(","),f=generate_channel_groups_list(W).join(",");if(c||f){c||(c=","),t();var g=b({uuid:jb,auth:i});f&&(g["channel-group"]=f);var k=JSON.stringify(X);k.length>2&&(g.state=JSON.stringify(X)),Z&&(g.heartbeat=Z),j(),R=cb({timeout:x,callback:a,fail:function(a){p(a,o),lb.time(d)},data:b(g),url:[K,"subscribe",D,encode(c),a,T],success:function(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return o(a.error),timeout(L,SECOND);if(q(a[1]),T=!T&&S&&hb.get(D)||a[1],m(function(a){a.connected||(a.connected=1,a.connect(a.name))}),U&&!S)return T=0,U=!1,hb.set(D,0),void timeout(e,A);v&&(T=1e4,v=0),hb.set(D,a[1]);var b=function(){var b="";b=a.length>3?a[3]:a.length>2?a[2]:map(generate_channel_list(V),function(b){return map(Array(a[0].length).join(",").split(","),function(){return b})}).join(",");var c=b.split(",");return function(){var a=c.shift()||Q;return[(V[a]||{}).callback||P,a.split(PRESENCE_SUFFIX)[0]]}}(),c=u(+a[1]);each(a[0],function(d){var e=b(),f=h(d,V[e[1]]?V[e[1]].cipher_key:null);e[0](f,a,e[2]||e[1],c)}),timeout(e,A)}})}}var f=a.channel,g=a.channel_group,c=c||a.callback,c=c||a.message,i=a.auth_key||E,k=a.connect||function(){},l=a.reconnect||function(){},n=a.disconnect||function(){},o=a.error||function(){},q=a.idle||function(){},r=a.presence||0,s=a.noheresync||0,v=a.backfill||0,w=a.timetoken||0,x=a.timeout||z,A=a.windowing||y,B=a.state,C=a.heartbeat||a.pnexpires,F=a.restore||S;return S=F,T=w,f||g?c?D?((C||0===C)&&lb.set_heartbeat(C),f&&each((f.join?f.join(","):""+f).split(","),function(b){var d=V[b]||{};V[Q=b]={name:b,connected:d.connected,disconnected:d.disconnected,subscribed:1,callback:P=c,cipher_key:a.cipher_key,connect:k,disconnect:n,reconnect:l},B&&(X[b]=b in B?B[b]:B),r&&(lb.subscribe({channel:b+PRESENCE_SUFFIX,callback:r,restore:F}),d.subscribed||s||lb.here_now({channel:b,callback:function(a){each("uuids"in a?a.uuids:[],function(c){r({action:"join",uuid:c,timestamp:Math.floor(rnow()/1e3),occupancy:a.occupancy||1},a,b)})}}))}),g&&each((g.join?g.join(","):""+g).split(","),function(b){var d=W[b]||{};W[b]={name:b,connected:d.connected,disconnected:d.disconnected,subscribed:1,callback:P=c,cipher_key:a.cipher_key,connect:k,disconnect:n,reconnect:l},r&&(lb.subscribe({channel_group:b+PRESENCE_SUFFIX,callback:r,restore:F}),d.subscribed||s||lb.here_now({channel_group:b,callback:function(a){each("uuids"in a?a.uuids:[],function(c){r({action:"join",uuid:c,timestamp:Math.floor(rnow()/1e3),occupancy:a.occupancy||1},a,b)})}}))}),L=function(){t(),timeout(e,A)},READY?void L():READY_BUFFER.push(L)):eb("Missing Subscribe Key"):eb("Missing Callback"):eb("Missing Channel")},here_now:function(a,c){var c=a.callback||c,d=a.error||function(){},e=a.auth_key||E,f=a.channel,g=a.channel_group,h=gb(),i="uuids"in a?a.uuids:!0,j=a.state,k={uuid:jb,auth:e};if(i||(k.disable_uuids=1),j&&(k.state=1),!c)return eb("Missing Callback");if(!D)return eb("Missing Subscribe Key");var l=[J,"v2","presence","sub_key",D];f&&l.push("channel")&&l.push(encode(f)),"0"!=h&&(k.callback=h),g&&(k["channel-group"]=g,!f&&l.push("channel")&&l.push(",")),cb({callback:h,data:b(k),success:function(a){o(a,c,d)},fail:function(a){p(a,d)},url:l})},where_now:function(a,c){var c=a.callback||c,d=a.error||function(){},e=a.auth_key||E,f=gb(),g=a.uuid||jb,h={auth:e};return c?D?("0"!=f&&(h.callback=f),void cb({callback:f,data:b(h),success:function(a){o(a,c,d)},fail:function(a){p(a,d)},url:[J,"v2","presence","sub_key",D,"uuid",encode(g)]})):eb("Missing Subscribe Key"):eb("Missing Callback")},state:function(a,c){var d,c=a.callback||c||function(){},e=a.error||function(){},f=a.auth_key||E,g=gb(),h=a.state,i=a.uuid||jb,j=a.channel,k=a.channel_group,l=b({auth:f});return D?i?j||k?("0"!=g&&(l.callback=g),"undefined"!=typeof j&&V[j]&&V[j].subscribed?h&&(X[j]=h):j=",","undefined"!=typeof k&&W[k]&&W[k].subscribed&&(h&&(X[k]=h),l["channel-group"]=k),l.state=JSON.stringify(h),d=h?[J,"v2","presence","sub-key",D,"channel",j,"uuid",i,"data"]:[J,"v2","presence","sub-key",D,"channel",j,"uuid",encode(i)],void cb({callback:g,data:b(l),success:function(a){o(a,c,e)},fail:function(a){p(a,e)},url:d})):eb("Missing Channel"):eb("Missing UUID"):eb("Missing Subscribe Key")},grant:function(a,c){var c=a.callback||c,d=a.error||function(){},f=a.channel,g=a.channel_group,h=gb(),i=a.ttl,j=a.read?"1":"0",k=a.write?"1":"0",l=a.manage?"1":"0",m=a.auth_key;if(!c)return eb("Missing Callback");if(!D)return eb("Missing Subscribe Key");if(!C)return eb("Missing Publish Key");if(!F)return eb("Missing Secret Key");var n=Math.floor((new Date).getTime()/1e3),q=D+"\n"+C+"\ngrant\n",r={w:k,r:j,timestamp:n};a.manage&&(r.m=l),"undefined"!=typeof f&&null!=f&&f.length>0&&(r.channel=f),"undefined"!=typeof g&&null!=g&&g.length>0&&(r["channel-group"]=g),"0"!=h&&(r.callback=h),(i||0===i)&&(r.ttl=i),m&&(r.auth=m),r=b(r),m||delete r.auth,q+=e(r);var s=G(q,F);s=s.replace(/\+/g,"-"),s=s.replace(/\//g,"_"),r.signature=s,cb({callback:h,data:r,success:function(a){o(a,c,d)},fail:function(a){p(a,d)},url:[J,"v1","auth","grant","sub-key",D]})},mobile_gw_provision:function(a){var b,c=a.callback||function(){},d=a.auth_key||E,e=a.error||function(){},f=gb(),g=a.channel,h=a.op,i=a.gw_type,j=a.device_id;return j?i?h?g?C?D?(b=[J,"v1/push/sub-key",D,"devices",j],db={uuid:jb,auth:d,type:i},"add"==h?db.add=g:"remove"==h&&(db.remove=g),void cb({callback:f,data:db,success:function(a){o(a,c,e)},fail:function(a){p(a,e)},url:b})):eb("Missing Subscribe Key"):eb("Missing Publish Key"):eb("Missing gw destination Channel (channel)"):eb("Missing GW Operation (op: add or remove)"):eb("Missing GW Type (gw_type: gcm or apns)"):eb("Missing Device ID (device_id)")},audit:function(a,c){var c=a.callback||c,d=a.error||function(){},f=a.channel,g=a.channel_group,h=a.auth_key,i=gb();if(!c)return eb("Missing Callback");if(!D)return eb("Missing Subscribe Key");if(!C)return eb("Missing Publish Key");if(!F)return eb("Missing Secret Key");var j=Math.floor((new Date).getTime()/1e3),k=D+"\n"+C+"\naudit\n",l={timestamp:j};"0"!=i&&(l.callback=i),"undefined"!=typeof f&&null!=f&&f.length>0&&(l.channel=f),"undefined"!=typeof g&&null!=g&&g.length>0&&(l["channel-group"]=g),h&&(l.auth=h),l=b(l),h||delete l.auth,k+=e(l);var m=G(k,F);m=m.replace(/\+/g,"-"),m=m.replace(/\//g,"_"),l.signature=m,cb({callback:i,data:l,success:function(a){o(a,c,d)},fail:function(a){p(a,d)},url:[J,"v1","auth","audit","sub-key",D]})},revoke:function(a,b){a.read=!1,a.write=!1,lb.grant(a,b)},set_uuid:function(a){jb=a,L()},get_uuid:function(){return jb},isArray:function(a){return isArray(a)},get_subscibed_channels:function(){return generate_channel_list(V,!0)},presence_heartbeat:function(a){var c=a.callback||function(){},d=a.error||function(){},e=gb(),f={uuid:jb,auth:E},g=JSON.stringify(X);g.length>2&&(f.state=JSON.stringify(X)),Z>0&&320>Z&&(f.heartbeat=Z),"0"!=e&&(f.callback=e);var h=encode(generate_channel_list(V,!0).join(",")),i=generate_channel_groups_list(W,!0).join(",");h||(h=","),i&&(f["channel-group"]=i),cb({callback:e,data:b(f),timeout:5*SECOND,url:[J,"v2","presence","sub-key",D,"channel",h,"heartbeat"],success:function(a){o(a,c,d)},fail:function(a){p(a,d)}})},stop_timers:function(){clearTimeout(w),clearTimeout(x)},xdr:cb,ready:ready,db:hb,uuid:uuid,map:map,each:each,"each-channel":m,grep:grep,offline:function(){t(1,{message:"Offline. Please check your network settings."})},supplant:supplant,now:rnow,unique:unique,updater:updater};return jb||(jb=lb.uuid()),hb.set(D+"uuid",jb),w=timeout(r,SECOND),x=timeout(s,A),Y=timeout(j,($-3)*SECOND),v(),lb}function crypto_obj(){function a(a){function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a>>>b|a<<32-b}function d(a,b){return a>>>b}function e(a,b,c){return a&b^~a&c}function f(a,b,c){return a&b^a&c^b&c}function g(a){return c(a,2)^c(a,13)^c(a,22)}function h(a){return c(a,6)^c(a,11)^c(a,25)}function i(a){return c(a,7)^c(a,18)^d(a,3)}function j(a){return c(a,17)^c(a,19)^d(a,10)}function k(a,c){var d,k,l,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[c>>5]|=128<<24-c%32,a[(c+64>>9<<4)+15]=c;for(var r=0;r<a.length;r+=16){d=w[0],k=w[1],l=w[2],m=w[3],n=w[4],o=w[5],p=w[6],q=w[7];for(var s=0;64>s;s++)x[s]=16>s?a[s+r]:b(b(b(j(x[s-2]),x[s-7]),i(x[s-15])),x[s-16]),t=b(b(b(b(q,h(n)),e(n,o,p)),v[s]),x[s]),u=b(g(d),f(d,k,l)),q=p,p=o,o=n,n=b(m,t),m=l,l=k,k=d,d=b(t,u);w[0]=b(d,w[0]),w[1]=b(k,w[1]),w[2]=b(l,w[2]),w[3]=b(m,w[3]),w[4]=b(n,w[4]),w[5]=b(o,w[5]),w[6]=b(p,w[6]),w[7]=b(q,w[7])}return w}function l(a){for(var b=Array(),c=(1<<o)-1,d=0;d<a.length*o;d+=o)b[d>>5]|=(a.charCodeAt(d/o)&c)<<24-d%32;return b}function m(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}function n(a){for(var b=p?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(3-d%4)+4&15)+b.charAt(a[d>>2]>>8*(3-d%4)&15);return c}var o=8,p=0;return a=m(a),n(k(l(a),a.length*o))}var b=CRYPTO;b.size(256);var c=b.s2a("0123456789012345");return{encrypt:function(d,e){if(!e)return d;var f=b.s2a(a(e).slice(0,32)),g=b.s2a(JSON.stringify(d)),h=b.rawEncrypt(g,f,c),i=b.Base64.encode(h);return i||d},decrypt:function(d,e){if(!e)return d;var f=b.s2a(a(e).slice(0,32));try{var g=b.Base64.decode(d),h=b.rawDecrypt(g,f,c,!1),i=JSON.parse(h);return i}catch(j){return void 0}}}}window.JSON&&window.JSON.stringify||function(){function toJSON(){try{return this.valueOf()}catch(a){return null}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&(i=toJSON.call(i,a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}window.JSON||(window.JSON={});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text){return eval("("+text+")")})}();var NOW=1,READY=!1,READY_BUFFER=[],PRESENCE_SUFFIX="-pnpres",DEF_WINDOWING=10,DEF_TIMEOUT=1e4,DEF_SUB_TIMEOUT=310,DEF_KEEPALIVE=60,SECOND=1e3,URLBIT="/",PARAMSBIT="&",PRESENCE_HB_THRESHOLD=5,PRESENCE_HB_DEFAULT=30,SDK_VER="3.7.0",REPL=/{([\w\-]+)}/g,nextorigin=function(){var a=20,b=Math.floor(Math.random()*a);return function(c,d){return c.indexOf("pubsub.")>0&&c.replace("pubsub","ps"+(d?uuid().split("-")[0]:++b<a?b:b=1))||c}}(),CRYPTO=function(){var a=14,b=8,c=!1,d=function(a){try{return unescape(encodeURIComponent(a))}catch(b){throw"Error on UTF-8 encode"}},e=function(a){try{return decodeURIComponent(escape(a))}catch(b){throw"Bad Key"}},f=function(a){var b,c,d=[];for(a.length<16&&(b=16-a.length,d=[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]),c=0;c<a.length;c++)d[c]=a[c];return d},g=function(a,b){var c,d,e="";if(b){if(c=a[15],c>16)throw"Decryption error: Maybe bad key";if(16==c)return"";for(d=0;16-c>d;d++)e+=String.fromCharCode(a[d])}else for(d=0;16>d;d++)e+=String.fromCharCode(a[d]);return e},h=function(a){var b,c="";for(b=0;b<a.length;b++)c+=(a[b]<16?"0":"")+a[b].toString(16);return c},j=function(a){var b=[];return a.replace(/(..)/g,function(a){b.push(parseInt(a,16))}),b},k=function(a,b){var c,e=[];for(b||(a=d(a)),c=0;c<a.length;c++)e[c]=a.charCodeAt(c);return e},l=function(c){switch(c){case 128:a=10,b=4;break;case 192:a=12,b=6;break;case 256:a=14,b=8;break;default:throw"Invalid Key Size Specified:"+c}},m=function(a){var b,c=[];for(b=0;a>b;b++)c=c.concat(Math.floor(256*Math.random()));return c},n=function(c,d){var e,f=a>=12?3:2,g=[],h=[],i=[],j=[],k=c.concat(d);for(i[0]=GibberishAES.Hash.MD5(k),j=i[0],e=1;f>e;e++)i[e]=GibberishAES.Hash.MD5(i[e-1].concat(k)),j=j.concat(i[e]);return g=j.slice(0,4*b),h=j.slice(4*b,4*b+16),{key:g,iv:h}},o=function(a,b,c){b=x(b);var d,e=Math.ceil(a.length/16),g=[],h=[];for(d=0;e>d;d++)g[d]=f(a.slice(16*d,16*d+16));for(a.length%16===0&&(g.push([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),e++),d=0;d<g.length;d++)g[d]=0===d?w(g[d],c):w(g[d],h[d-1]),h[d]=q(g[d],b);return h},p=function(a,b,c,d){b=x(b);var f,h=a.length/16,i=[],j=[],k="";for(f=0;h>f;f++)i.push(a.slice(16*f,16*(f+1)));for(f=i.length-1;f>=0;f--)j[f]=r(i[f],b),j[f]=0===f?w(j[f],c):w(j[f],i[f-1]);for(f=0;h-1>f;f++)k+=g(j[f]);return k+=g(j[f],!0),d?k:e(k)},q=function(b,d){c=!1;var e,f=v(b,d,0);for(e=1;a+1>e;e++)f=s(f),f=t(f),a>e&&(f=u(f)),f=v(f,d,e);return f},r=function(b,d){c=!0;var e,f=v(b,d,a);for(e=a-1;e>-1;e--)f=t(f),f=s(f),f=v(f,d,e),e>0&&(f=u(f));return f},s=function(a){var b,d=c?F:E,e=[];for(b=0;16>b;b++)e[b]=d[a[b]];return e},t=function(a){var b,d=[],e=c?[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3]:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11];for(b=0;16>b;b++)d[b]=a[e[b]];return d},u=function(a){var b,d=[];if(c)for(b=0;4>b;b++)d[4*b]=M[a[4*b]]^K[a[1+4*b]]^L[a[2+4*b]]^J[a[3+4*b]],d[1+4*b]=J[a[4*b]]^M[a[1+4*b]]^K[a[2+4*b]]^L[a[3+4*b]],d[2+4*b]=L[a[4*b]]^J[a[1+4*b]]^M[a[2+4*b]]^K[a[3+4*b]],d[3+4*b]=K[a[4*b]]^L[a[1+4*b]]^J[a[2+4*b]]^M[a[3+4*b]];else for(b=0;4>b;b++)d[4*b]=H[a[4*b]]^I[a[1+4*b]]^a[2+4*b]^a[3+4*b],d[1+4*b]=a[4*b]^H[a[1+4*b]]^I[a[2+4*b]]^a[3+4*b],d[2+4*b]=a[4*b]^a[1+4*b]^H[a[2+4*b]]^I[a[3+4*b]],d[3+4*b]=I[a[4*b]]^a[1+4*b]^a[2+4*b]^H[a[3+4*b]];return d},v=function(a,b,c){var d,e=[];for(d=0;16>d;d++)e[d]=a[d]^b[c][d];return e},w=function(a,b){var c,d=[];for(c=0;16>c;c++)d[c]=a[c]^b[c];return d},x=function(c){var d,e,f,g,h=[],i=[],j=[];for(d=0;b>d;d++)e=[c[4*d],c[4*d+1],c[4*d+2],c[4*d+3]],h[d]=e;for(d=b;4*(a+1)>d;d++){for(h[d]=[],f=0;4>f;f++)i[f]=h[d-1][f];for(d%b===0?(i=y(z(i)),i[0]^=G[d/b-1]):b>6&&d%b==4&&(i=y(i)),f=0;4>f;f++)h[d][f]=h[d-b][f]^i[f]}for(d=0;a+1>d;d++)for(j[d]=[],g=0;4>g;g++)j[d].push(h[4*d+g][0],h[4*d+g][1],h[4*d+g][2],h[4*d+g][3]);return j},y=function(a){for(var b=0;4>b;b++)a[b]=E[a[b]];return a},z=function(a){var b,c=a[0];for(b=0;4>b;b++)a[b]=a[b+1];return a[3]=c,a},A=function(a,b){var c=[];for(i=0;i<a.length;i+=b)c[i/b]=parseInt(a.substr(i,b),16);return c},B=function(a){var b=[];for(i=0;i<a.length;i++)b[a[i]]=i;return b},C=function(a,b){var c,d;for(d=0,c=0;8>c;c++)d=1==(1&b)?d^a:d,a=a>127?283^a<<1:a<<1,b>>>=1;return d},D=function(a){for(var b=[],c=0;256>c;c++)b[c]=C(a,c);return b},E=A("637c777bf26b6fc53001672bfed7ab76ca82c97dfa5947f0add4a2af9ca472c0b7fd9326363ff7cc34a5e5f171d8311504c723c31896059a071280e2eb27b27509832c1a1b6e5aa0523bd6b329e32f8453d100ed20fcb15b6acbbe394a4c58cfd0efaafb434d338545f9027f503c9fa851a3408f929d38f5bcb6da2110fff3d2cd0c13ec5f974417c4a77e3d645d197360814fdc222a908846eeb814de5e0bdbe0323a0a4906245cc2d3ac629195e479e7c8376d8dd54ea96c56f4ea657aae08ba78252e1ca6b4c6e8dd741f4bbd8b8a703eb5664803f60e613557b986c11d9ee1f8981169d98e949b1e87e9ce5528df8ca1890dbfe6426841992d0fb054bb16",2),F=B(E),G=A("01020408102040801b366cd8ab4d9a2f5ebc63c697356ad4b37dfaefc591",2),H=D(2),I=D(3),J=D(9),K=D(11),L=D(13),M=D(14),N=function(a,b,c){var d,e=m(8),f=n(k(b,c),e),g=f.key,h=f.iv,i=[[83,97,108,116,101,100,95,95].concat(e)];return a=k(a,c),d=o(a,g,h),d=i.concat(d),Q.encode(d)},O=function(a,b,c){var d=Q.decode(a),e=d.slice(8,16),f=n(k(b,c),e),g=f.key,h=f.iv;return d=d.slice(16,d.length),a=p(d,g,h,c)},P=function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=[],h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a[i]<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d=[];for(c=0;3>=c;c++)b=a>>>8*c&255,d=d.concat(b);return d}var n,o,p,q,r,s,t,u,v,w=[],x=A("67452301efcdab8998badcfe10325476d76aa478e8c7b756242070dbc1bdceeef57c0faf4787c62aa8304613fd469501698098d88b44f7afffff5bb1895cd7be6b901122fd987193a679438e49b40821f61e2562c040b340265e5a51e9b6c7aad62f105d02441453d8a1e681e7d3fbc821e1cde6c33707d6f4d50d87455a14eda9e3e905fcefa3f8676f02d98d2a4c8afffa39428771f6816d9d6122fde5380ca4beea444bdecfa9f6bb4b60bebfbc70289b7ec6eaa127fad4ef308504881d05d9d4d039e6db99e51fa27cf8c4ac5665f4292244432aff97ab9423a7fc93a039655b59c38f0ccc92ffeff47d85845dd16fa87e4ffe2ce6e0a30143144e0811a1f7537e82bd3af2352ad7d2bbeb86d391",8);for(w=l(a),s=x[0],t=x[1],u=x[2],v=x[3],n=0;n<w.length;n+=16)o=s,p=t,q=u,r=v,s=h(s,t,u,v,w[n+0],7,x[4]),v=h(v,s,t,u,w[n+1],12,x[5]),u=h(u,v,s,t,w[n+2],17,x[6]),t=h(t,u,v,s,w[n+3],22,x[7]),s=h(s,t,u,v,w[n+4],7,x[8]),v=h(v,s,t,u,w[n+5],12,x[9]),u=h(u,v,s,t,w[n+6],17,x[10]),t=h(t,u,v,s,w[n+7],22,x[11]),s=h(s,t,u,v,w[n+8],7,x[12]),v=h(v,s,t,u,w[n+9],12,x[13]),u=h(u,v,s,t,w[n+10],17,x[14]),t=h(t,u,v,s,w[n+11],22,x[15]),s=h(s,t,u,v,w[n+12],7,x[16]),v=h(v,s,t,u,w[n+13],12,x[17]),u=h(u,v,s,t,w[n+14],17,x[18]),t=h(t,u,v,s,w[n+15],22,x[19]),s=i(s,t,u,v,w[n+1],5,x[20]),v=i(v,s,t,u,w[n+6],9,x[21]),u=i(u,v,s,t,w[n+11],14,x[22]),t=i(t,u,v,s,w[n+0],20,x[23]),s=i(s,t,u,v,w[n+5],5,x[24]),v=i(v,s,t,u,w[n+10],9,x[25]),u=i(u,v,s,t,w[n+15],14,x[26]),t=i(t,u,v,s,w[n+4],20,x[27]),s=i(s,t,u,v,w[n+9],5,x[28]),v=i(v,s,t,u,w[n+14],9,x[29]),u=i(u,v,s,t,w[n+3],14,x[30]),t=i(t,u,v,s,w[n+8],20,x[31]),s=i(s,t,u,v,w[n+13],5,x[32]),v=i(v,s,t,u,w[n+2],9,x[33]),u=i(u,v,s,t,w[n+7],14,x[34]),t=i(t,u,v,s,w[n+12],20,x[35]),s=j(s,t,u,v,w[n+5],4,x[36]),v=j(v,s,t,u,w[n+8],11,x[37]),u=j(u,v,s,t,w[n+11],16,x[38]),t=j(t,u,v,s,w[n+14],23,x[39]),s=j(s,t,u,v,w[n+1],4,x[40]),v=j(v,s,t,u,w[n+4],11,x[41]),u=j(u,v,s,t,w[n+7],16,x[42]),t=j(t,u,v,s,w[n+10],23,x[43]),s=j(s,t,u,v,w[n+13],4,x[44]),v=j(v,s,t,u,w[n+0],11,x[45]),u=j(u,v,s,t,w[n+3],16,x[46]),t=j(t,u,v,s,w[n+6],23,x[47]),s=j(s,t,u,v,w[n+9],4,x[48]),v=j(v,s,t,u,w[n+12],11,x[49]),u=j(u,v,s,t,w[n+15],16,x[50]),t=j(t,u,v,s,w[n+2],23,x[51]),s=k(s,t,u,v,w[n+0],6,x[52]),v=k(v,s,t,u,w[n+7],10,x[53]),u=k(u,v,s,t,w[n+14],15,x[54]),t=k(t,u,v,s,w[n+5],21,x[55]),s=k(s,t,u,v,w[n+12],6,x[56]),v=k(v,s,t,u,w[n+3],10,x[57]),u=k(u,v,s,t,w[n+10],15,x[58]),t=k(t,u,v,s,w[n+1],21,x[59]),s=k(s,t,u,v,w[n+8],6,x[60]),v=k(v,s,t,u,w[n+15],10,x[61]),u=k(u,v,s,t,w[n+6],15,x[62]),t=k(t,u,v,s,w[n+13],21,x[63]),s=k(s,t,u,v,w[n+4],6,x[64]),v=k(v,s,t,u,w[n+11],10,x[65]),u=k(u,v,s,t,w[n+2],15,x[66]),t=k(t,u,v,s,w[n+9],21,x[67]),s=c(s,o),t=c(t,p),u=c(u,q),v=c(v,r);
return m(s).concat(m(t),m(u),m(v))},Q=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=a.split(""),c=function(a){{var c,d,e=[],f="";Math.floor(16*a.length/3)}for(c=0;c<16*a.length;c++)e.push(a[Math.floor(c/16)][c%16]);for(c=0;c<e.length;c+=3)f+=b[e[c]>>2],f+=b[(3&e[c])<<4|e[c+1]>>4],f+=void 0!==e[c+1]?b[(15&e[c+1])<<2|e[c+2]>>6]:"=",f+=void 0!==e[c+2]?b[63&e[c+2]]:"=";for(d=f.slice(0,64),c=1;c<Math.ceil(f.length/64);c++)d+=f.slice(64*c,64*c+64)+(Math.ceil(f.length/64)==c+1?"":"\n");return d},d=function(b){b=b.replace(/\n/g,"");var c,d=[],e=[],f=[];for(c=0;c<b.length;c+=4)e[0]=a.indexOf(b.charAt(c)),e[1]=a.indexOf(b.charAt(c+1)),e[2]=a.indexOf(b.charAt(c+2)),e[3]=a.indexOf(b.charAt(c+3)),f[0]=e[0]<<2|e[1]>>4,f[1]=(15&e[1])<<4|e[2]>>2,f[2]=(3&e[2])<<6|e[3],d.push(f[0],f[1],f[2]);return d=d.slice(0,d.length-d.length%16)};return"function"==typeof Array.indexOf&&(a=b),{encode:c,decode:d}}();return{size:l,h2a:j,expandKey:x,encryptBlock:q,decryptBlock:r,Decrypt:c,s2a:k,rawEncrypt:o,rawDecrypt:p,dec:O,openSSLKey:n,a2h:h,enc:N,Hash:{MD5:P},Base64:Q}}();window.PUBNUB||function(){function a(a,b){var c=CryptoJS.HmacSHA256(a,b);return c.toString(CryptoJS.enc.Base64)}function b(a){return document.getElementById(a)}function c(a){console.error(a)}function d(a,b){var c=[];return each(a.split(/\s+/),function(a){each((b||document).getElementsByTagName(a),function(a){c.push(a)})}),c}function e(a,b,c){each(a.split(","),function(a){var d=function(a){a||(a=window.event),c(a)||(a.cancelBubble=!0,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())};b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent?b.attachEvent("on"+a,d):b["on"+a]=d})}function f(){return d("head")[0]}function g(a,b,c){return c?void a.setAttribute(b,c):a&&a.getAttribute&&a.getAttribute(b)}function h(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>0&&"number"==typeof b[c]?"px":"")}catch(d){}}function i(a){return document.createElement(a)}function j(){return s||n()?0:unique()}function k(a){if(s||n())return l(a);var c=i("script"),d=a.callback,e=unique(),h=0,j=a.timeout||DEF_TIMEOUT,k=timeout(function(){t(1,{message:"timeout"})},j),m=a.fail||function(){},o=a.data||{},q=a.success||function(){},r=function(){f().appendChild(c)},t=function(a,d){h||(h=1,c.onerror=null,clearTimeout(k),a||!d||q(d),timeout(function(){a&&m();var c=b(e),d=c&&c.parentNode;d&&d.removeChild(c)},SECOND))};return window[d]=function(a){t(0,a)},a.blocking||(c[p]=p),c.onerror=function(){t(1)},c.src=build_url(a.url,o),g(c,"id",e),r(),t}function l(a){var b,c,d=function(){if(!f){f=1,clearTimeout(h);try{c=JSON.parse(b.responseText)}catch(a){return o(1)}e=1,l(c)}},e=0,f=0,g=a.timeout||DEF_TIMEOUT,h=timeout(function(){o(1,{message:"timeout"})},g),i=a.fail||function(){},j=a.data||{},l=a.success||function(){},m=!a.blocking,o=function(a,c){e||(e=1,clearTimeout(h),b&&(b.onerror=b.onload=null,b.abort&&b.abort(),b=null),a&&i(c))};try{b=n()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,b.onerror=b.onabort=function(){o(1,b.responseText||{error:"Network Connection Error"})},b.onload=b.onloadend=d,b.onreadystatechange=function(){if(b&&4==b.readyState)switch(b.status){case 401:case 402:case 403:try{c=JSON.parse(b.responseText),o(1,c)}catch(a){return o(1,b.responseText)}}};var p=build_url(a.url,j);b.open("GET",p,m),m&&(b.timeout=g),b.send()}catch(q){return o(0),s=0,k(a)}return o}function m(){return"onLine"in navigator?navigator.onLine:1}function n(){if(!y||!y.get)return 0;var a={id:n.id++,send:function(){},abort:function(){a.id={}},open:function(b,c){n[a.id]=a,y.get(a.id,c)}};return a}var o="https://pubnub.a.ssl.fastly.net/pubnub.swf",p="async",q=navigator.userAgent,r="PubNub-JS-Web/3.7.0",s=-1==q.indexOf("MSIE 6");window.console||(window.console=window.console||{}),console.log||(console.log=console.error=(window.opera||{}).postError||function(){});var t=function(){var a=window.localStorage;return{get:function(b){try{return a?a.getItem(b):-1==document.cookie.indexOf(b)?null:((document.cookie||"").match(RegExp(b+"=([^;]+)"))||[])[1]||null}catch(c){return}},set:function(b,c){try{if(a)return a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(d){return}}}}(),u={list:{},unbind:function(a){u.list[a]=[]},bind:function(a,b){(u.list[a]=u.list[a]||[]).push(b)},fire:function(a,b){each(u.list[a]||[],function(a){a(b)})}},v=b("pubnub")||0,w=function(l){l.jsonp&&(s=0);var n=l.subscribe_key||"",o=((+l.keepalive||DEF_KEEPALIVE)*SECOND,l.uuid||t.get(n+"uuid")||"",l.leave_on_unload||0);l.xdr=k,l.db=t,l.error=l.error||c,l._is_online=m,l.jsonp_cb=j,l.hmac_SHA256=a,l.crypto_obj=crypto_obj(),l.params={pnsdk:r};var p=function(a){return w(a)},q=PN_API(l);for(var v in q)q.hasOwnProperty(v)&&(p[v]=q[v]);return p.css=h,p.$=b,p.create=i,p.bind=e,p.head=f,p.search=d,p.attr=g,p.events=u,p.init=p,p.secure=p,e("beforeunload",window,function(){return o&&p["each-channel"](function(a){p.LEAVE(a.name,0)}),!0}),l.notest?p:(e("offline",window,p.offline),e("offline",document,p.offline),p)};w.init=w,w.secure=w,"complete"===document.readyState?timeout(ready,0):e("load",window,function(){timeout(ready,0)});var x=v||{};PUBNUB=w({notest:1,publish_key:g(x,"pub-key"),subscribe_key:g(x,"sub-key"),ssl:!document.location.href.indexOf("https")||"on"==g(x,"ssl"),origin:g(x,"origin"),uuid:g(x,"uuid")}),window.jQuery&&(window.jQuery.PUBNUB=w),"undefined"!=typeof module&&(module.exports=PUBNUB)&&ready();var y=b("pubnubs")||0;v&&(h(v,{position:"absolute",top:-SECOND}),("opera"in window||g(v,"flash"))&&(v.innerHTML="<object id=pubnubs data="+o+"><param name=movie value="+o+"><param name=allowscriptaccess value=always></object>"),PUBNUB.rdx=function(a,b){return b?(n[a].responseText=unescape(b),void n[a].onload()):n[a].onerror()},n.id=SECOND)}(),function(){var a=PUBNUB.ws=function(b,c){if(!(this instanceof a))return new a(b,c);var d=this,b=d.url=b||"",e=(d.protocol=c||"Sec-WebSocket-Protocol",b.split("/")),f={ssl:"wss:"===e[0],origin:e[2],publish_key:e[3],subscribe_key:e[4],channel:e[5]};return d.CONNECTING=0,d.OPEN=1,d.CLOSING=2,d.CLOSED=3,d.CLOSE_NORMAL=1e3,d.CLOSE_GOING_AWAY=1001,d.CLOSE_PROTOCOL_ERROR=1002,d.CLOSE_UNSUPPORTED=1003,d.CLOSE_TOO_LARGE=1004,d.CLOSE_NO_STATUS=1005,d.CLOSE_ABNORMAL=1006,d.onclose=d.onerror=d.onmessage=d.onopen=d.onsend=function(){},d.binaryType="",d.extensions="",d.bufferedAmount=0,d.trasnmitting=!1,d.buffer=[],d.readyState=d.CONNECTING,b?(d.pubnub=PUBNUB.init(f),d.pubnub.setup=f,d.setup=f,void d.pubnub.subscribe({restore:!1,channel:f.channel,disconnect:d.onerror,reconnect:d.onopen,error:function(){d.onclose({code:d.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(a){d.onmessage({data:a})},connect:function(){d.readyState=d.OPEN,d.onopen()}})):(d.readyState=d.CLOSED,d.onclose({code:d.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),d)};a.prototype.send=function(a){var b=this;b.pubnub.publish({channel:b.pubnub.setup.channel,message:a,callback:function(a){b.onsend({data:a})}})},a.prototype.close=function(){var a=this;a.pubnub.unsubscribe({channel:a.pubnub.setup.channel}),a.readyState=a.CLOSED,a.onclose({})}}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){for(var b=CryptoJS,c=b.lib,d=c.WordArray,e=c.Hasher,c=b.algo,f=[],g=[],h=function(a){return 4294967296*(a-(0|a))|0},i=2,j=0;64>j;){var k;a:{k=i;for(var l=a.sqrt(k),m=2;l>=m;m++)if(!(k%m)){k=!1;break a}k=!0}k&&(8>j&&(f[j]=h(a.pow(i,.5))),g[j]=h(a.pow(i,1/3)),j++),i++}var n=[],c=c.SHA256=e.extend({_doReset:function(){this._hash=new d.init(f.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)n[m]=0|a[b+m];else{var o=n[m-15],p=n[m-2];n[m]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+n[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+n[m-16]}o=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+g[m]+n[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=h+o|0,h=f,f=e,e=d,d=o+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(c),b.HmacSHA256=e._createHmacHelper(c)}(Math),function(){var a=CryptoJS,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,c){a=this._hasher=new a.init,"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c)),c.clamp();for(var f=this._oKey=c.clone(),g=this._iKey=c.clone(),h=f.words,i=g.words,j=0;d>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=e,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;return a=b.finalize(a),b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();